@model IEnumerable<Dat_Ve_Xem_Phim_CGV.Models.PHIM>
@{
    ViewBag.Title = "Quản lý phim";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

@if (TempData["Error"] != null)
{
    <div class="alert-message m-3 p-4 bg-rose-500/20 border border-rose-500/50 text-rose-400 rounded-xl flex items-center gap-3 animate-bounce">
        <span class="material-symbols-outlined">warning</span>
        @TempData["Error"]
    </div>
}
@if (TempData["Success"] != null)
{
    <div class="alert-message m-3 p-4 bg-emerald-500/20 border border-emerald-500/50 text-emerald-400 rounded-xl flex items-center gap-3">
        <span class="material-symbols-outlined">check_circle</span>
        @TempData["Success"]
    </div>
}
<div class="h-full overflow-y-auto p-4 custom-scrollbar">
    <div class="flex items-center justify-between mb-6">
        <a href="@Url.Action("Create", "Admin")"
           class="bg-primary hover:bg-primary-hover text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-all">
            <span class="material-symbols-outlined">add</span>
            Thêm phim mới
        </a>
    </div>

    <div class="bg-surface-dark rounded-xl border border-surface-highlight shadow-2xl overflow-x-auto">
        <table class="w-full text-sm min-w-[800px]">
            <thead class="bg-surface-highlight/50 text-white uppercase text-xs font-bold sticky top-0">
                <tr>
                    <th class="px-4 py-4 text-left">Mã phim</th>
                    <th class="px-4 py-4 text-left">Tên phim</th>
                    <th class="px-4 py-4 text-left">Thể loại</th>
                    <th class="px-4 py-4 text-center">Thời lượng</th>
                    <th class="px-4 py-4 text-center">Ngày phát hành</th>
                    <th class="px-4 py-4 text-center">Trạng thái</th>
                    <th class="px-4 py-4 text-center">Thao tác</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-surface-highlight">
                @foreach (var item in Model)
                {
                    <tr class="hover:bg-white/[0.02] transition-colors group">
                        <td class="px-4 py-4 font-mono text-slate-400">@item.MAPHIM</td>
                        <td class="px-4 py-4 font-semibold text-white group-hover:text-primary transition-colors">@item.TENPHIM</td>
                        <td class="px-4 py-4 text-slate-300">@item.THELOAI</td>
                        <td class="px-4 py-4 text-center text-slate-300">@item.THOILUONG phút</td>
                        <td class="px-4 py-4 text-center text-slate-300">
                            @(item.NGAYPH?.ToString("dd/MM/yyyy"))
                        </td>
                        <td class="px-4 py-4 text-center">
                            @if (item.TRANGTHAI == "Đang chiếu")
                            {
                                <span class="px-3 py-1 text-[10px] font-bold uppercase rounded-full bg-emerald-500/10 text-emerald-400 border border-emerald-500/20">Đang chiếu</span>
                            }
                            else if (item.TRANGTHAI == "Sắp chiếu")
                            {
                                <span class="px-3 py-1 text-[10px] font-bold uppercase rounded-full bg-amber-500/10 text-amber-400 border border-amber-500/20">Sắp chiếu</span>
                            }
                            else
                            {
                                <span class="px-3 py-1 text-[10px] font-bold uppercase rounded-full bg-rose-500/10 text-rose-400 border border-rose-500/20">Ngưng chiếu</span>
                            }
                        </td>
                        <td class="px-4 py-4 text-center">
                            <div class="flex justify-center gap-2">
                                <a href="@Url.Action("Edit", new { id = item.MAPHIM })"
                                   class="p-2 rounded-lg bg-blue-500/10 text-blue-400 hover:bg-blue-500 hover:text-white transition-all shadow-lg shadow-blue-500/10">
                                    <span class="material-symbols-outlined text-[18px]">edit</span>
                                </a>
                                <a href="@Url.Action("XoaPhim", new { id = item.MAPHIM })"
                                   onclick="return confirm('Bạn có chắc chắn muốn xóa phim này?')"
                                   class="p-2 rounded-lg bg-rose-500/10 text-rose-400 hover:bg-rose-500 hover:text-white transition-all">
                                    <span class="material-symbols-outlined text-[18px]">delete</span>
                                </a>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>